{"version":3,"sources":["webpack:///./src/app/home/home.module.ts","webpack:///./src/app/home/home.page.html","webpack:///./src/app/home/home.page.scss","webpack:///./src/app/home/home.page.ts","webpack:///./src/app/services/user.service.ts"],"names":[],"mappings":"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","file":"home-home-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\n\nimport { HomePage } from './home.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild([\n      {\n        path: '',\n        component: HomePage\n      }\n    ])\n  ],\n  declarations: [HomePage]\n})\nexport class HomePageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button icon-only menuToggle=\\\"start\\\">\\n          <ion-icon name=\\\"menu\\\"></ion-icon>\\n      </ion-menu-button>          \\n    </ion-buttons>\\n    <ion-title>\\n          Pratiche Web\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content padding>\\n  <ion-grid>\\n    <ion-row>\\n      <ion-col>\\n        <ion-item>\\n          <h1>Utenti</h1>\\n        </ion-item>\\n      </ion-col>\\n    </ion-row>\\n    <ion-row *ngIf=\\\"entries.length === 0\\\">\\n      <ion-col>\\n        <ion-item>\\n          <ion-text>Non ci sono utenti.</ion-text>\\n        </ion-item>\\n      </ion-col>\\n    </ion-row>\\n    <ion-row *ngIf=\\\"entries.length > 0\\\">\\n      <ion-col *ngFor=\\\"let entry of entries\\\" size=\\\"12\\\" size-md=\\\"6\\\">\\n        <ion-card>\\n          <ion-item lines=\\\"none\\\">\\n            <ion-label>{{entry.email}}</ion-label>\\n            <ion-button color=\\\"danger\\\" slot=\\\"end\\\" (click)=\\\"deletePressed(entry)\\\">\\n              <ion-icon slot=\\\"icon-only\\\" name=\\\"trash\\\"></ion-icon>\\n            </ion-button>\\n          </ion-item>\\n          <ion-card-content>\\n            <ion-text>{{entry.firstName}} {{entry.lastName}}</ion-text>\\n          </ion-card-content>\\n        </ion-card>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n</ion-content>\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2hvbWUvaG9tZS5wYWdlLnNjc3MifQ== */\"","import { Component } from '@angular/core';\nimport { UserModel } from 'src/app/models/user-model';\nimport { UserService } from 'src/app/services/user.service';\nimport { AlertController, ToastController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: 'home.page.html',\n  styleUrls: ['home.page.scss'],\n})\n\nexport class HomePage {\n  constructor(\n    private us: UserService,\n    private as: AlertController,\n    private tc: ToastController,\n  ) {}\n\n  entries: UserModel[] = [];\n\n  getList(): Promise<UserModel[]> {\n    return new Promise((resolve, reject) => {\n      this.us.getList().subscribe({\n        next(u) {\n          resolve(u);\n        },\n        error(err) {\n          reject(err);\n        }\n      });\n    });\n  }\n\n  delete(email: string): Promise<boolean> {\n    return new Promise((resolve, reject) => {\n      this.us.delete(email).subscribe({\n        next(r) {\n          resolve(r);\n        },\n        error(err) {\n          reject(err);\n        }\n      });\n    });\n  }\n\n  async confirmDelete(email: string) {\n    const alert = await this.as.create({\n      header: 'Cancellazione utente',\n      message: 'Stai per <strong>cancellare</strong> un utente',\n      buttons: [\n        {\n          text: 'Annulla',\n          role: 'cancel',\n          cssClass: 'secondary',\n          handler: (cnl) => {}\n        },\n        {\n          text: 'Conferma',\n          handler: () => {\n            try {\n              this.delete(email).then(ss => {\n                if (ss) {\n                  this.showMessage('Infortunio correttamente cancellato.');\n                  this.entries = this.entries.filter(e => {\n                    return (e.email === email);\n                  });\n                } else {\n                  this.showMessage('Si è verificato un problema. Riprova!');\n                }\n              });\n            } catch (e) {\n              this.showMessage(`Si è verificato un problema ${e}. Riprova!`);\n            }\n          }\n        }\n      ]\n    });\n    await alert.present();\n  }\n\n  async deletePressed(entry: UserModel) {\n    console.log(entry);\n    await this.confirmDelete(entry.email);\n  }\n\n  async showMessage(message: string) {\n    const toast = await this.tc.create({\n      message,\n      duration: 3000\n    });\n    await toast.present();\n  }\n\n  async ionViewWillEnter() {\n    try {\n      this.entries = await this.getList();\n    } catch (err) {\n      console.log(err);\n    }\n  }\n }\n","import { Injectable } from '@angular/core';\nimport { UserModel } from 'src/app/models/user-model';\nimport { HttpResponse, HttpClient } from '@angular/common/http';\nimport { Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UserService {\n  baseUrl = '/api/users';\n  private buildHeaders () {\n    const session = window.localStorage.getItem('_session') || 'notloggedin';\n    return {\n      headers: {\n        's-t': session,\n      }\n    };\n  }\n\n  constructor(private hc: HttpClient) { }\n\n  getList(): Observable<UserModel[]> {\n    return this.hc.get<UserModel[]>(\n      this.baseUrl,\n      this.buildHeaders()\n    );\n  }\n\n  delete(email: string): Observable<boolean> {\n    return new Observable<boolean>(observer => {\n      const session = window.localStorage.getItem('_session') || 'notloggedin';\n      this.hc.delete(`${this.baseUrl}/${email}`, {\n        headers: {\n          's-t': session,\n        },\n        responseType: 'text',\n        observe: 'response',\n      }).subscribe({\n        next(res: HttpResponse<any>) {\n          observer.next(res.status === 200);\n        },\n        error(err) {\n          observer.error(err);\n        }\n      });\n    });\n  }\n}\n"],"sourceRoot":""}