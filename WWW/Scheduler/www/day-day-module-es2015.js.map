{"version":3,"sources":["./src/app/day/day.page.html","./src/app/day/day.module.ts","./src/app/day/day.page.scss","./src/app/day/day.page.ts","./src/app/pipes/kind.pipe.ts"],"names":[],"mappings":"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","file":"day-day-module-es2015.js","sourcesContent":["module.exports = \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button icon-only menuToggle=\\\"start\\\">\\n        <ion-icon name=\\\"menu\\\"></ion-icon>\\n      </ion-menu-button>          \\n    </ion-buttons>\\n    <ion-title>\\n      Pratiche Web\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n\\n<ion-content>\\n  <div class=\\\"ion-padding\\\">\\n    <h1>{{dayLabel}}</h1>\\n    <ion-text *ngIf=\\\"entries.length === 0\\\">\\n      Non sono presenti allarmi o prescrizioni.\\n    </ion-text>\\n    <ion-grid>\\n      <ion-row>\\n        <ion-col size=\\\"12\\\" size-md=\\\"6\\\" *ngFor=\\\"let entry of entries\\\">\\n          <ion-card>\\n            <ion-item>\\n              <ion-button color=\\\"primary\\\" (click)=\\\"goToSource(entry)\\\">\\n                <ion-icon slot=\\\"icon-only\\\" name=\\\"compass\\\"></ion-icon>\\n              </ion-button>\\n              <ion-label>{{entry.kind | kind}} {{entry.title}}</ion-label>\\n            </ion-item>\\n            <ion-card-content>\\n              <ion-text>{{entry.notes}}</ion-text>\\n            </ion-card-content>\\n          </ion-card>\\n        </ion-col>\\n      </ion-row>\\n      <ion-row>\\n        <ion-col>\\n          <ion-item lines=\\\"none\\\">\\n            <ion-button color=\\\"primary\\\" (click)=\\\"goBack()\\\">\\n              <ion-icon slot=\\\"icon-only\\\" name=\\\"arrow-back\\\"></ion-icon>\\n            </ion-button>\\n          </ion-item>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n  </div>\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DayPage } from './day.page';\nimport { KindPipe } from 'src/app/pipes/kind.pipe';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DayPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  providers: [KindPipe],\n  declarations: [DayPage, KindPipe]\n})\nexport class DayPageModule {}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2RheS9kYXkucGFnZS5zY3NzIn0= */\"","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Event } from 'src/app/models/event';\nimport { EventService } from 'src/app/services/event.service';\nimport { Subscription } from 'rxjs';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport * as moment from 'moment-timezone';\n\n@Component({\n  selector: 'app-day',\n  templateUrl: './day.page.html',\n  styleUrls: ['./day.page.scss'],\n})\nexport class DayPage implements OnInit, OnDestroy {\n  dayLabel = '';\n  entries: Event[] = [];\n  day$: Subscription;\n  day: string;\n\n  constructor(\n    private es: EventService,\n    private router: Router,\n    private ar: ActivatedRoute,\n    ) { }\n\n  ngOnInit() {\n  }\n\n  getList(fromDate: string, toDate: string): Promise<Event[]> {\n    return new Promise((resolve, reject) => {\n      this.es.getList(fromDate, toDate).subscribe({\n        next(list) {\n          resolve(list);\n        },\n        error(err) {\n          reject(err);\n        }\n      });\n    });\n  }\n\n  getDay(): Promise<string> {\n    return new Promise((resolve, reject) => {\n      this.day$ = this.ar.params.subscribe(params => {\n        resolve(params.day);\n      });\n    });\n  }\n\n  async ionViewWillEnter() {\n    try {\n      moment.locale('it_IT');\n      this.day = await this.getDay();\n      this.dayLabel = moment(this.day, 'DD-MM-YYYY').tz('Europe/Rome').format('dddd DD/MM/YYYY');\n      this.entries = await this.getList(this.day, this.day);\n    } catch (err) {\n      console.error(err);\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.day$) {\n      this.day$.unsubscribe();\n    }\n  }\n\n  goBack() {\n    this.router.navigate(['/']);\n  }\n\n  goToSource(e: Event) {\n    if (e.kind === 'policy') {\n      window.location.href = `http://localhost:8080/policies/policy/${e.token}`;\n    }\n    if (e.kind === 'casualty') {\n      window.location.href = `http://localhost:8080/casualties/casualty/${e.token}`;\n    }\n    if (e.kind === 'proposal') {\n      window.location.href = `http://localhost:8080/policies/proposal/${e.token}`;\n    }\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'kind'\n})\nexport class KindPipe implements PipeTransform {\n\n  transform(value: string): string {\n    let result = '';\n    switch (value) {\n      case 'policy':\n        result = 'Polizza';\n        break;\n      case 'casualty':\n        result = 'Infortunio';\n        break;\n      case 'propose':\n        result = 'Proposta';\n        break;\n      default:\n        result = '';\n    }\n    return result;\n  }\n\n}\n"],"sourceRoot":""}