{"version":3,"sources":["./src/app/day/day.page.html","./src/app/day/day.module.ts","./src/app/day/day.page.scss","./src/app/day/day.page.ts","./src/app/pipes/kind.pipe.ts"],"names":[],"mappings":"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","file":"day-day-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button icon-only menuToggle=\\\"start\\\">\\n        <ion-icon name=\\\"menu\\\"></ion-icon>\\n      </ion-menu-button>          \\n    </ion-buttons>\\n    <ion-title>\\n      Pratiche Web\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n\\n<ion-content>\\n  <div class=\\\"ion-padding\\\">\\n    <h1>{{dayLabel}}</h1>\\n    <ion-text *ngIf=\\\"entries.length === 0\\\">\\n      Non sono presenti allarmi o prescrizioni.\\n    </ion-text>\\n    <ion-grid>\\n      <ion-row>\\n        <ion-col size=\\\"12\\\" size-md=\\\"6\\\" *ngFor=\\\"let entry of entries\\\">\\n          <ion-card>\\n            <ion-item>\\n              <ion-button color=\\\"primary\\\" (click)=\\\"goToSource(entry)\\\">\\n                <ion-icon slot=\\\"icon-only\\\" name=\\\"compass\\\"></ion-icon>\\n              </ion-button>\\n              <ion-label>{{entry.kind | kind}} {{entry.title}}</ion-label>\\n            </ion-item>\\n            <ion-card-content>\\n              <ion-text>{{entry.notes}}</ion-text>\\n            </ion-card-content>\\n          </ion-card>\\n        </ion-col>\\n      </ion-row>\\n      <ion-row>\\n        <ion-col>\\n          <ion-item lines=\\\"none\\\">\\n            <ion-button color=\\\"primary\\\" (click)=\\\"goBack()\\\">\\n              <ion-icon slot=\\\"icon-only\\\" name=\\\"arrow-back\\\"></ion-icon>\\n            </ion-button>\\n          </ion-item>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n  </div>\\n</ion-content>\\n\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DayPage } from './day.page';\nimport { KindPipe } from 'src/app/pipes/kind.pipe';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DayPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  providers: [KindPipe],\n  declarations: [DayPage, KindPipe]\n})\nexport class DayPageModule {}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2RheS9kYXkucGFnZS5zY3NzIn0= */\"","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Event } from 'src/app/models/event';\nimport { EventService } from 'src/app/services/event.service';\nimport { Subscription } from 'rxjs';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport * as moment from 'moment-timezone';\n\n@Component({\n  selector: 'app-day',\n  templateUrl: './day.page.html',\n  styleUrls: ['./day.page.scss'],\n})\nexport class DayPage implements OnInit, OnDestroy {\n  dayLabel = '';\n  entries: Event[] = [];\n  day$: Subscription;\n  day: string;\n\n  constructor(\n    private es: EventService,\n    private router: Router,\n    private ar: ActivatedRoute,\n    ) { }\n\n  ngOnInit() {\n  }\n\n  getList(fromDate: string, toDate: string): Promise<Event[]> {\n    return new Promise((resolve, reject) => {\n      this.es.getList(fromDate, toDate).subscribe({\n        next(list) {\n          resolve(list);\n        },\n        error(err) {\n          reject(err);\n        }\n      });\n    });\n  }\n\n  getDay(): Promise<string> {\n    return new Promise((resolve, reject) => {\n      this.day$ = this.ar.params.subscribe(params => {\n        resolve(params.day);\n      });\n    });\n  }\n\n  async ionViewWillEnter() {\n    try {\n      moment.locale('it_IT');\n      this.day = await this.getDay();\n      this.dayLabel = moment(this.day, 'DD-MM-YYYY').tz('Europe/Rome').format('dddd DD/MM/YYYY');\n      this.entries = await this.getList(this.day, this.day);\n    } catch (err) {\n      console.error(err);\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.day$) {\n      this.day$.unsubscribe();\n    }\n  }\n\n  goBack() {\n    this.router.navigate(['/']);\n  }\n\n  goToSource(e: Event) {\n    if (e.kind === 'policy') {\n      window.location.href = `http://pratiche.ares/policies/policy/${e.token}`;\n    }\n    if (e.kind === 'casualty') {\n      window.location.href = `http://pratiche.ares/casualties/casualty/${e.token}`;\n    }\n    if (e.kind === 'proposal') {\n      window.location.href = `http://pratiche.ares/policies/proposal/${e.token}`;\n    }\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'kind'\n})\nexport class KindPipe implements PipeTransform {\n\n  transform(value: string): string {\n    let result = '';\n    switch (value) {\n      case 'policy':\n        result = 'Polizza';\n        break;\n      case 'casualty':\n        result = 'Infortunio';\n        break;\n      case 'propose':\n        result = 'Proposta';\n        break;\n      default:\n        result = '';\n    }\n    return result;\n  }\n\n}\n"],"sourceRoot":""}