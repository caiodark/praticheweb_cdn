{"version":3,"sources":["webpack:///./src/app/attachments/attachments.module.ts","webpack:///./src/app/attachments/attachments.page.html","webpack:///./src/app/attachments/attachments.page.scss","webpack:///./src/app/attachments/attachments.page.ts","webpack:///./src/app/models/service-status.enum.ts","webpack:///./src/app/services/attachments.service.ts"],"names":[],"mappings":"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","file":"default~casualty-form-casualty-form-module~src-app-attachments-attachments-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { AttachmentsPage } from './attachments.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: AttachmentsPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [AttachmentsPage]\n})\nexport class AttachmentsPageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button icon-only menuToggle=\\\"start\\\">\\n          <ion-icon name=\\\"menu\\\"></ion-icon>\\n      </ion-menu-button>          \\n    </ion-buttons>\\n    <ion-title>\\n      Pratiche Web\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <form [formGroup]=\\\"attachmentForm\\\">\\n    <ion-grid>\\n      <ion-row>\\n        <ion-col>\\n          <p *ngIf=\\\"knd==='infortunio'\\\">\\n            <a (click)=\\\"onListaClick()\\\" [routerLink]=\\\"\\\">{{listLabel}}</a> | <a (click)=\\\"onBackClick()\\\" [routerLink]=\\\"\\\">{{backLabel}}</a> | nuovo allegato\\n          </p>\\n          <p *ngIf=\\\"knd==='cp'\\\">\\n            <a (click)=\\\"onListaClick()\\\" [routerLink]=\\\"\\\">{{listLabel}}</a> | \\n            <a (click)=\\\"onBackClick()\\\" [routerLink]=\\\"\\\">{{backLabel}}</a> | \\n            <a (click)=\\\"onShortBackClick()\\\" [routerLink]=\\\"\\\">{{shortBackLabel}}</a> | \\n            <a (click)=\\\"onShortestBackClick()\\\" [routerLink]=\\\"\\\">{{shortestBackLabel}}</a> | \\n            nuovo allegato\\n          </p>\\n        </ion-col>\\n      </ion-row>\\n      <ion-row>\\n        <ion-col>\\n          <h1>Nuovo allegato</h1>\\n        </ion-col>\\n      </ion-row>\\n      <ion-row>\\n        <ion-col size=\\\"12\\\" size-sm>\\n          <ion-item>\\n            <ion-label>Nome:</ion-label>\\n            <ion-input placeholder=\\\"Nome\\\" formControlName=\\\"name\\\"></ion-input> \\n          </ion-item>\\n        </ion-col>\\n        <ion-col size=\\\"12\\\" size-sm>\\n          <ion-item>\\n            <ion-label>Tag:</ion-label>\\n            <ion-input placeholder=\\\"parole separate da virgola\\\" formControlName=\\\"tags\\\"></ion-input> \\n          </ion-item>\\n        </ion-col>\\n      </ion-row>\\n      <ion-row>\\n        <ion-col size=\\\"12\\\" size-sm *ngIf=\\\"knd === 'infortunio'\\\">\\n          <ion-item>\\n            <ion-label>Tipo:</ion-label>\\n            <ion-select placeholder=\\\"Seleziona tipo\\\" formControlName=\\\"kind\\\" okText=\\\"Seleziona\\\" cancelText=\\\"Annulla\\\" interface=\\\"action-sheet\\\">\\n              <ion-select-option value=\\\"infortunio-certificato-medico\\\">Certificato medico d'apertura</ion-select-option>\\n              <ion-select-option value=\\\"infortunio-modulo-denuncia\\\">Modulo di denuncia</ion-select-option>\\n              <ion-select-option value=\\\"infortunio-documento\\\">Altro documento</ion-select-option>\\n            </ion-select>\\n          </ion-item>\\n        </ion-col>\\n        <ion-col size=\\\"12\\\" size-sm *ngIf=\\\"knd === 'cp'\\\">\\n          <ion-item>\\n            <ion-label>Tipo:</ion-label>\\n            <ion-select placeholder=\\\"Seleziona tipo\\\" formControlName=\\\"kind\\\" okText=\\\"Seleziona\\\" cancelText=\\\"Annulla\\\" interface=\\\"action-sheet\\\">\\n              <ion-select-option value=\\\"infortunio-polizza-lettera-intervento\\\">Lettera di intervento</ion-select-option>\\n              <ion-select-option value=\\\"infortunio-polizza-raccomandata\\\">Raccomandata</ion-select-option>\\n              <ion-select-option value=\\\"infortunio-polizza-documento\\\">Altro documento</ion-select-option>\\n            </ion-select>\\n          </ion-item>\\n        </ion-col>\\n        <ion-col size=\\\"12\\\" size-sm>\\n          <ion-item>\\n            <ion-label>File:</ion-label>\\n            <ion-input type=\\\"file\\\" placeholder=\\\"allegato\\\" formControlName=\\\"file\\\" (change)=\\\"onFileChange($event)\\\"></ion-input> \\n          </ion-item>\\n        </ion-col>\\n      </ion-row>\\n      <ion-row>\\n        <ion-col size=\\\"12\\\" size-sm>\\n          <div>\\n            <ion-button color=\\\"primary\\\" [disabled]=\\\"!attachmentForm.valid\\\" (click)=\\\"onSaveClick()\\\">\\n              <ion-icon slot=\\\"icon-only\\\" name=\\\"save\\\"></ion-icon>\\n            </ion-button>\\n            <ion-button color=\\\"tertiary\\\" (click)=\\\"onBackClick()\\\" *ngIf=\\\"knd==='infortunio'\\\">\\n              <ion-icon slot=\\\"icon-only\\\" name=\\\"arrow-round-back\\\"></ion-icon>\\n            </ion-button>\\n            <ion-button color=\\\"tertiary\\\" (click)=\\\"onShortestBackClick()\\\" *ngIf=\\\"knd==='cp'\\\">\\n              <ion-icon slot=\\\"icon-only\\\" name=\\\"arrow-round-back\\\"></ion-icon>\\n            </ion-button>\\n          </div>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n  </form>\\n</ion-content>\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2F0dGFjaG1lbnRzL2F0dGFjaG1lbnRzLnBhZ2Uuc2NzcyJ9 */\"","import { Component, OnInit, OnDestroy, ChangeDetectorRef } from '@angular/core';\nimport { FormGroup, Validators, FormBuilder, FormControl } from '@angular/forms';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { ToastController } from '@ionic/angular';\nimport { Subscription } from 'rxjs';\nimport { AttachmentsService } from '../services/attachments.service';\nimport { ServiceStatus } from '../models/service-status.enum';\n\n@Component({\n  selector: 'app-attachments',\n  templateUrl: './attachments.page.html',\n  styleUrls: ['./attachments.page.scss'],\n})\nexport class AttachmentsPage implements OnInit, OnDestroy {\n\n  attachmentForm: FormGroup;\n  route$: Subscription;\n  kind$: Subscription;\n  id$: Subscription;\n  token: string;\n  knd: string;\n  id: string;\n  listLabel = '';\n  backLabel = '';\n  shortBackLabel = '';\n  shortestBackLabel = '';\n\n  constructor(\n    private fb: FormBuilder,\n    private cd: ChangeDetectorRef,\n    private router: Router,\n    private ar: ActivatedRoute,\n    private as: AttachmentsService,\n    private tc: ToastController\n  ) {\n    this.attachmentForm = fb.group({\n      name: ['', Validators.required],\n      tags: [''],\n      kind: ['', Validators.required],\n      file: [null, Validators.required],\n      fileName: ['']\n    });\n  }\n\n  private getToken(): Promise<string> {\n    const self = this;\n    return new Promise((resolve, reject) => {\n      self.route$ = self.ar.params.subscribe((params) => {\n        resolve(params.token);\n      });\n    });\n  }\n\n  private getKind(): Promise<string> {\n    return new Promise((resolve, reject) => {\n      this.kind$ = this.ar.queryParams.subscribe((params) => {\n        resolve(params.kind);\n      });\n    });\n  }\n\n  private getId(): Promise<string> {\n    return new Promise((resolve, reject) => {\n      this.id$ = this.ar.params.subscribe((params) => {\n        resolve(params.id);\n      });\n    });\n  }\n\n  ngOnInit() {\n  }\n\n  ngOnDestroy() {\n    if (this.route$) {\n      this.route$.unsubscribe();\n    }\n    if (this.kind$) {\n      this.kind$.unsubscribe();\n    }\n  }\n\n  async ionViewWillEnter() {\n    try {\n      this.token = await this.getToken();\n      this.knd = await this.getKind();\n      this.shortBackLabel = 'Lista polizze allegate';\n      this.shortestBackLabel = 'Polizza allegata';\n      if (this.knd === 'infortunio') {\n        this.backLabel = 'Infortunio';\n        this.listLabel = 'Lista infortuni';\n      }\n      if (this.knd === 'cp') {\n        this.backLabel = 'Infortunio';\n        this.listLabel = 'Lista infortuni';\n        this.id = await this.getId();\n        console.log(this.id);\n      }\n    } catch (err) {\n      console.error(err);\n    }\n  }\n\n  onFileChange(event) {\n    const reader = new FileReader();\n\n    if (event.target.files && event.target.files.length) {\n      const [file] = event.target.files;\n      this.attachmentForm.patchValue({\n        file,\n        fileName: file.name\n      });\n    }\n  }\n\n  onListaClick() {\n    if (this.knd === 'infurtunio') {\n      this.router.navigate(['home']);\n    }\n    if (this.knd === 'cp') {\n      this.router.navigate(['home']);\n    }\n  }\n\n  onBackClick() {\n    if (this.knd === 'infortunio') {\n      this.router.navigate(['casualty', this.token]);\n    }\n    if (this.knd === 'cp') {\n      this.router.navigate(['casualty', this.token]);\n    }\n  }\n\n  onShortBackClick() {\n    if (this.knd === 'cp') {\n      this.router.navigate(['casualty', this.token, 'policies']);\n    }\n  }\n\n  onShortestBackClick() {\n    if (this.knd === 'cp') {\n      this.router.navigate(['casualty', this.token, 'policies', this.id]);\n    }\n  }\n\n  private async showMessage(message: string) {\n    const toast = await this.tc.create({\n      message,\n      duration: 2000\n    });\n    await toast.present();\n  }\n\n  async onSaveClick() {\n    const fd = new FormData();\n    const obj = this.attachmentForm.value;\n\n    fd.append('name', obj.name);\n    fd.append('tags', obj.tags);\n    fd.append('filename', obj.fileName);\n    fd.append('file', obj.file, obj.fileName);\n    fd.append('kind', obj.kind);\n    if (this.knd === 'cp') {\n      fd.append('cpId', this.id);\n    }\n\n    const self = this;\n    this.as.asyncPostAttachment(fd, this.token, obj.kind).subscribe({\n      async next(ris) {\n        if (ris === ServiceStatus.OK) {\n          await self.showMessage('Caricamento avvenuto con successo.');\n          self.onBackClick();\n        } else {\n          await self.showMessage('Si è verificato un problema, riprovare.');\n        }\n      },\n      async error(err) {\n        await self.showMessage('Si è verificato un problema, riprovare.');\n      }\n    });\n  }\n}\n","export enum ServiceStatus {\n  OK,\n  FAILED\n}\n","import { Injectable } from '@angular/core';\nimport { ServiceStatus } from '../models/service-status.enum';\nimport { Observable } from 'rxjs';\nimport { HttpClient, HttpResponse } from '@angular/common/http';\nimport { Attachment } from '../models/attachment';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AttachmentsService {\n\n  constructor(private http: HttpClient) { }\n  baseUrl = '/api/attachments';\n\n  asyncGetAttachments(token: string, kind: string): Observable<Array<Attachment>> {\n    let session = window.localStorage.getItem('_session');\n\n    if (! session) {\n      session = 'loggedout';\n    }\n    return this.http.get<Attachment[]>(`${this.baseUrl}/${kind}/${token}`, {\n      headers : {\n        's-t': session\n      }\n    });\n  }\n\n  asyncPostAttachment(attachment: FormData, token: string, kind: string): Observable<ServiceStatus> {\n    return new Observable<ServiceStatus>((observer) => {\n      let session = window.localStorage.getItem('_session');\n      if (! session) {\n        session = 'loggedout';\n      }\n      this.http.post(`${this.baseUrl}/${kind}/${token}`, attachment, {\n        headers : {\n          's-t': session\n        },\n        observe: 'response',\n        responseType: 'text'\n      }).subscribe((data: any) => {\n        if (data.status === 200) {\n          observer.next(ServiceStatus.OK);\n        } else {\n          observer.error(ServiceStatus.FAILED);\n        }\n        return {unsubscribe() {}};\n      });\n    });\n  }\n\n  asyncPostCopyAttachment(a: Attachment, destKind: string, destTkn: string): Observable<Attachment> {\n    let session = window.localStorage.getItem('_session');\n    if (! session) {\n      session = 'loggedout';\n    }\n    return this.http.post<Attachment>(\n      `${this.baseUrl}/copy/${a.kind}/${a.token}/${a._id}/to/${destKind}/${destTkn}`,\n      {},\n      {\n        headers: {\n          's-t': session\n        }\n      });\n  }\n\n  asyncPutAttachment(attachment: Attachment): Observable<ServiceStatus> {\n    return new Observable<ServiceStatus>((observer) => {\n      let session = window.localStorage.getItem('_session');\n      if (! session) {\n        session = 'loggedout';\n      }\n      const token = attachment.token;\n      const kind = attachment.kind;\n      this.http.put(`${this.baseUrl}/${kind}/${token}/${attachment._id}`, attachment, {\n        headers : {\n          's-t': session\n        },\n        observe: 'response',\n        responseType: 'text'\n      }).subscribe((data: any) => {\n        if (data.status === 200) {\n          observer.next(ServiceStatus.OK);\n        } else {\n          observer.error(ServiceStatus.FAILED);\n        }\n        return {unsubscribe() {}};\n      });\n    });\n  }\n\n  asyncDeleteAttachment(attachment: Attachment): Observable<ServiceStatus> {\n    return new Observable<ServiceStatus>((observer) => {\n      let session = window.localStorage.getItem('_session');\n      if (! session) {\n        session = 'loggedout';\n      }\n      const token = attachment.token;\n      const kind = attachment.kind;\n      this.http.delete(`${this.baseUrl}/${kind}/${token}/${attachment._id}`, {\n        headers : {\n          's-t': session\n        },\n        observe: 'response',\n        responseType: 'text'\n      }).subscribe((data: any) => {\n        if (data.status === 200) {\n          observer.next(ServiceStatus.OK);\n        } else {\n          observer.error(ServiceStatus.FAILED);\n        }\n        return {unsubscribe() {}};\n      });\n    });\n  }\n}\n"],"sourceRoot":""}