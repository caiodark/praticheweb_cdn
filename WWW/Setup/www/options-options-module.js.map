{"version":3,"sources":["webpack:///./src/app/options/options.module.ts","webpack:///./src/app/options/options.page.html","webpack:///./src/app/options/options.page.scss","webpack:///./src/app/options/options.page.ts"],"names":[],"mappings":"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","file":"options-options-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { OptionsPage } from './options.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: OptionsPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [OptionsPage]\n})\nexport class OptionsPageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button icon-only menuToggle=\\\"start\\\">\\n          <ion-icon name=\\\"menu\\\"></ion-icon>\\n      </ion-menu-button>          \\n    </ion-buttons>\\n    <ion-title>\\n          Pratiche Web\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <div class=\\\"ion-padding\\\">\\n    <div>\\n      <h1>Opzioni per {{Kind?.name}}</h1>\\n    </div>    \\n    <div *ngIf=\\\"!Options || Options.length === 0\\\">\\n      Nessuna opzione presente <br />\\n      <ion-button color=\\\"tertiary\\\" (click)=\\\"onCreateClick()\\\" size=\\\"default\\\">\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"create\\\"></ion-icon>\\n      </ion-button>\\n      <ion-button color=\\\"tertiary\\\" (click)=\\\"onBackClick()\\\" size=\\\"default\\\">\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"arrow-round-back\\\"></ion-icon>\\n      </ion-button>\\n    </div>\\n    <div *ngIf=\\\"Options && Options.length > 0\\\">\\n      <ion-button color=\\\"tertiary\\\" (click)=\\\"onCreateClick()\\\" size=\\\"default\\\">\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"create\\\"></ion-icon>\\n      </ion-button>\\n      <ion-button color=\\\"tertiary\\\" (click)=\\\"onBackClick()\\\" size=\\\"default\\\">\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"arrow-round-back\\\"></ion-icon>\\n      </ion-button>\\n    </div>\\n    <ion-grid *ngIf=\\\"Options && Options.length > 0\\\">\\n      <ion-row>\\n        <ion-col size=\\\"12\\\" size-sm>\\n          <ion-list>\\n            <ion-item *ngFor=\\\"let o of Options\\\" lines=\\\"full\\\" >\\n              <ion-button color=\\\"primary\\\" (click)=\\\"onItemClick(o._id)\\\" slot=\\\"start\\\">\\n                <ion-icon slot=\\\"icon-only\\\" name=\\\"compass\\\"></ion-icon>\\n              </ion-button>\\n              <ion-button color=\\\"danger\\\" slot=\\\"end\\\" (click)=\\\"onItemDelete(o._id)\\\">\\n                <ion-icon slot=\\\"icon-only\\\" name=\\\"trash\\\"></ion-icon>\\n              </ion-button>\\n              <ion-label>{{o.name}}</ion-label>\\n            </ion-item>\\n          </ion-list>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n  </div>\\n</ion-content>\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL29wdGlvbnMvb3B0aW9ucy5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit, OnDestroy, Input } from '@angular/core';\nimport { AlertController, ToastController } from '@ionic/angular';\nimport { Subscription } from 'rxjs';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { OptionService } from '../services/option.service';\nimport { Option } from '../models/option';\nimport { Kind } from '../models/kind';\nimport { KindService} from '../services/kind.service';\nimport { ServiceStatus } from '../models/service-status.enum';\n\n@Component({\n  selector: 'app-options',\n  templateUrl: './options.page.html',\n  styleUrls: ['./options.page.scss'],\n})\nexport class OptionsPage implements OnInit, OnDestroy {\n\n  @Input() Route$: Subscription;\n  @Input() Kind: Kind;\n  @Input() Options: Array<Option>;\n\n  constructor(\n    private service: OptionService,\n    private router: Router,\n    private route: ActivatedRoute,\n    private ac: AlertController,\n    private tc: ToastController,\n    private ks: KindService) { }\n\n  ngOnInit() {\n\n  }\n\n  ngOnDestroy() {\n    if (this.Route$) {\n      this.Route$.unsubscribe();\n    }\n  }\n\n  private GetKind(kind_id: string): Promise<Kind> {\n    const self = this;\n    return new Promise((resolve, reject) => {\n      this.ks.asyncGet(kind_id).subscribe({\n        next(ris) {\n          resolve(ris);\n        },\n        error(err) {\n          resolve(null);\n        }\n      });\n    });\n  }\n\n  private GetOptions(kind_id: string): Promise<Array<Option>> {\n    const self = this;\n    return new Promise((resolve, reject) => {\n      self.service.asyncGetList(kind_id).subscribe({\n        next(ris) {\n          resolve(ris);\n        },\n        error(err) {\n          resolve([]);\n        }\n      });\n    });\n  }\n\n  private GetKindId(): Promise<string> {\n    const self = this;\n    return new Promise((resolve, reject) => {\n      self.Route$ = this.route.params.subscribe(params => {\n        resolve(params['kind_id']);\n      });\n    });\n  }\n\n  private DeleteItem(id: string): Promise<ServiceStatus> {\n    const self = this;\n    return new Promise((resolve, reject) => {\n      self.service.asyncDelete(self.Kind._id, id).subscribe({\n        next(ris) {\n          resolve(ris);\n        },\n        error(err) {\n          resolve(ServiceStatus.FAILED);\n        }\n      });\n    });\n  }\n\n  private async ConfirmDelete(id: string) {\n    const self = this;\n    const alert = await this.ac.create({\n      header: 'Cancellazione opzione',\n      message: 'Stai per <strong>cancellare</strong> una opzione',\n      buttons: [\n        {\n          text: 'Annulla',\n          role: 'cancel',\n          cssClass: 'secondary',\n          handler: (cnl) => {}\n        },\n        {\n          text: 'Conferma',\n          handler: async () => {\n            const ss = await this.DeleteItem(id);\n            if (ss === ServiceStatus.OK) {\n              await self.LoadData();\n              await self.ShowToast('Opzione correttamente cancellata.');\n            } else {\n              await self.ShowToast('Si è verificato un problema. Riprova!');\n            }\n          }\n        }\n      ]\n    });\n    await alert.present();\n  }\n\n  private async ShowToast(message: string) {\n    const toast = await this.tc.create({\n      message,\n      duration: 2000\n    });\n    await toast.present();\n  }\n\n  private async LoadData() {\n    const kindId = await this.GetKindId();\n    this.Options = await this.GetOptions(kindId);\n    this.Kind = await this.GetKind(kindId);\n  }\n\n  async ionViewWillEnter() {\n    await this.LoadData();\n    localStorage.setItem('kindName', this.Kind.name);\n  }\n\n  onCreateClick() {\n    this.router.navigate(['/option-form', this.Kind._id, 'new']);\n  }\n\n  onItemClick(id: string) {\n    this.router.navigate(['/option-form', this.Kind._id, id]);\n  }\n\n  async onItemDelete(id: string) {\n    await this.ConfirmDelete(id);\n  }\n\n  onBackClick() {\n    this.router.navigate(['/home']);\n  }\n}\n"],"sourceRoot":""}